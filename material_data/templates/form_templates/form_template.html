{% extends 'base.html' %}
{% load static %}
{% block extra_head %}
    <script src="https://cdn.jsdelivr.net/npm/vue@3.0.11/dist/vue.global.prod.js"></script>
  
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <style>
        <!-- Makes it look like bootstrap 5-->
        .select2-container {
            width: 100% !important;
        }
        .select2-container--default .select2-selection--single {
            border: 1px solid #ced4da;
            border-radius: .25rem;
            height: calc(2.25rem + 2px);
        }
        .select2-container--default .select2-selection--single .select2-selection__rendered {
            line-height: 2.25rem;
            padding-left: 1rem;
        }
        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: calc(2.25rem + 2px);
        }
    </style>
{% endblock %}

{% block content %}{% load static %}
{% load render_bundle from webpack_loader %}
<script  type="text/javascript">
    window.formset_fields = {{ formset_fields | safe }};
    window.formsetName =  "{{ formset_name }}";
    window.points = {{ formset_initial | safe }}
</script>
{% include 'materialnavbar.html' %}

<div class="container mt-5" id="app">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <h1 class="mb-4">{{ form_title }}</h1>
            {% if display_context %} 
            <div class="mt-4 mb-4"> 
                {% for key, value in display_context.items %}
                    <b>{{ key|title }}: </b>{{ value }}
                    <br>
                {% endfor %}
            </div>
            {% endif %}
            <form method="post" class="mt-4">
                {% csrf_token %}
                <div class="mb-3">
                    {% for field in form %}
                    <div class="mb-3">
                        <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}
                            {% if field.help_text %}
                            ({{ field.help_text }})
                            {% endif %}
                        </label>
                        {{ field }}
                    </div>
                    {% endfor %}
                </div>

                <!-- Formset and Excel upload for Create and Update Views -->
                {% if formset %}
                {{ formset.management_form }}
               <div id="formsetTableVue"></div>
                {% endif %}

                <button type="submit" class="btn btn-primary">Save</button>
            </form>
        </div>
    </div>
</div>
{% if formset %}
{% render_bundle 'chunk-vendors' %} {% render_bundle 'formsetTableVue' %}
{% endif %}
<script>
    $(document).ready(function() {
        $('.select2').select2();
    });
</script>
    

{% endblock %}
